# 本仓库的 AGENTS 指南

本仓库包含一个位于根目录的 Next.js 应用程序。当与代理（例如 Codex CLI）交互式开发项目时，请遵循以下指南，以确保开发体验——特别是热模块替换（HMR）——能够顺畅运行。

## 1. 使用开发服务器，**而非** `npm run build`

* **在迭代应用程序时，始终使用 `npm run dev`（或 `pnpm dev`、`yarn dev` 等）。** 这将以开发模式启动 Next.js 并启用热重载。
* **不要在代理会话中运行 `npm run build`。** 运行生产构建命令会将 `.next` 文件夹切换为生产资源，这会禁用热重载并可能导致开发服务器处于不一致状态。如果需要生产构建，请在交互式代理工作流之外进行。

## 2. 保持依赖同步

如果您添加或更新依赖项，请记住：

1. 更新相应的锁文件（`package-lock.json`、`pnpm-lock.yaml`、`yarn.lock`）。
2. 重启开发服务器，以便 Next.js 能够识别这些变更。

## 3. 编码规范

* 对于新组件和工具函数，优先使用 TypeScript（`.tsx`/`.ts`）。
* 在实际可行的情况下，将组件特定的样式文件与组件放在同一文件夹中。

## 4. 常用命令汇总

| 命令               | 用途                                            |
| ------------------ | ----------------------------------------------- |
| `npm run dev`      | 启动带有 HMR 的 Next.js 开发服务器。             |
| `npm run lint`     | 运行 ESLint 检查。                               |
| `npm run test`     | 执行测试套件（如果存在）。                        |
| `npm run build`    | **生产构建 – _请勿在代理会话期间运行_**          |

---

遵循这些实践可确保代理辅助开发工作流保持快速和可靠。如有疑问，请重启开发服务器而非运行生产构建。
